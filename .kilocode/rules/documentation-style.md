# TSera Documentation Style

## Documentation Philosophy

TSera documentation maintains **coherence with generated artifacts** and provides clear guidance for
entity definitions, CLI usage, and project development. All documentation should be actionable,
accurate, and synchronized with code.

## Entity Documentation

### Entity File Documentation

````typescript
/**
 * User Entity
 *
 * Represents application users with authentication and profile information.
 * Supports CRUD operations and password-based authentication.
 *
 * @example
 * ```typescript
 * import { defineEntity } from "tsera/core/entity.ts";
 * import { z } from "zod";
 *
 * export default defineEntity({
 *   name: "User",
 *   table: true,
 *   fields: {
 *     id: {
 *       validator: z.string(),
 *       description: "Unique identifier",
 *       db: { primary: true }
 *     },
 *     email: {
 *       validator: z.string().email(),
 *       description: "User email address",
 *       visibility: "public"
 *     },
 *     password: {
 *       validator: z.string().min(8),
 *       description: "Hashed password",
 *       visibility: "secret"
 *     }
 *   }
 * });
 * ```
 */
````

### Entity Documentation Standards

- **Purpose**: Clear functional description of entity purpose
- **Field Documentation**: Description, type, and examples for each field
- **Usage Examples**: Practical code examples for common operations
- **Relationship Documentation**: Document entity relationships if defined
- **Constraints**: Document any business rules or constraints

## CLI Documentation

### Command Help Documentation

```typescript
// Command help structure
function formatCommandHelp(command: Command): string {
  return `
${command.getName()} - ${command.getDescription()}

Usage:
  tsera ${command.getName()} [options]

Options:
${formatCommandOptions(command)}

Examples:
  ${formatCommandExamples(command)}
  `.trim();
}
```

### Global Help Documentation

```typescript
// Global help showing all commands
function showGlobalHelp(): void {
  const commands = [
    { name: "init", description: "Initialize new project" },
    { name: "dev", description: "Start development server" },
    { name: "doctor", description: "Diagnose project issues" },
    { name: "update", description: "Update CLI tool" },
  ];

  console.log("TSera CLI — The next era of fullstack TypeScript starts here.\n");

  console.log("Commands:");
  commands.forEach((cmd) => {
    console.log(`  ${cmd.name.padEnd(12)} ${cmd.description}`);
  });

  console.log("\nUse 'tsera <command> --help' for more information on a specific command.");
}
```

### Error Message Documentation

```typescript
// Standard error message format
function formatError(error: Error): string {
  if (error instanceof ValidationError) {
    return `Error: ${error.message}`;
  } else if (error instanceof FileSystemError) {
    return `File system error: ${error.message}`;
  } else {
    return `Unexpected error: ${error.message}`;
  }
}
```

## Generated Code Documentation

### Generated File Headers

```typescript
/**
 * GENERATED FILE - DO NOT EDIT MANUALLY
 *
 * This file is automatically generated by TSera.
 * Changes to this file will be overwritten on next generation.
 *
 * Generated: ${new Date().toISOString()}
 * Entity: ${entityName}
 *
 * @ts-ignore
 */
```

### Schema Documentation

````typescript
/**
 * User Schema
 *
 * Runtime validation schema for User entity.
 * Generated from entity definition at ${timestamp}.
 *
 * @example
 * ```typescript
 * import { UserSchema } from "./User.schema.ts";
 *
 * const validUser = {
 *   id: "123",
 *   email: "user@example.com"
 * };
 *
 * UserSchema.parse(validUser);
 * ```
 */
export const UserSchema = z.object({
  id: z.string().describe("Unique identifier"),
  email: z.string().email().describe("User email address"),
});

export type UserType = z.infer<typeof UserSchema>;
````

## API Documentation

### OpenAPI Documentation Standards

```json
{
  "openapi": "3.0.0",
  "info": {
    "title": "TSera API",
    "version": "1.0.0",
    "description": "Generated API from TSera entities"
  },
  "paths": {
    "/users": {
      "get": {
        "summary": "List users",
        "description": "Retrieve a list of users",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/User" }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "description": "User entity",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          }
        }
      }
    }
  }
}
```

## Project Documentation

### README.md Structure

`````markdown
# TSera Project

A fullstack TypeScript project powered by TSera - continuous coherence for modern applications.

## Quick Start

\`\`\`bash

# Start development server

deno task dev

# Initialize new project

tsera init my-app

# Diagnose project issues

tsera doctor

# Update CLI tool

tsera update \`\`\`

## Project Structure

\`\`\` . ├── app/ # Application code │ ├── back/ # Backend (Hono API) │ ├── front/ # Frontend
(Fresh) │ └── db/ # Database client and migrations ├── core/ # Entity definitions │ ├── entities/ #
Entity files │ ├── validation/ # Validation schemas │ └── types/ # Shared types ├── config/ #
Configuration files │ ├── tsera.config.ts # TSera configuration │ ├── db/ # Database configuration │
└── secrets/ # Secrets management ├── docs/ # Generated documentation ├── drizzle/ # Database
migrations └── tests/ # Tests \`\`\`

## Development

### Local Development

- Use `deno task dev` to start development server
- Entities are automatically watched for changes
- Artifacts are regenerated when entities change
- Use `tsera doctor` to diagnose project issues

## Configuration

See [Configuration Guide](./docs/configuration.md) for detailed configuration options.

## API Documentation

See [API Documentation](./docs/openapi.json) for generated API specification. \`\`\`

## Learn More

- [TSera Documentation](https://github.com/yourusername/tsera)
- [Fresh Documentation](https://fresh.deno.dev)
- [Deno Documentation](https://docs.deno.com) \`\`\`

## License

Apache License 2.0 \`\`\`

### Documentation Standards

- **Clear Structure**: Consistent organization with clear navigation
- **Code Examples**: Include practical, working code examples
- **Configuration Examples**: Show common configuration patterns
- **Troubleshooting**: Include common issues and solutions
- **Links**: Provide links to related documentation and resources

## Configuration Documentation

### tsera.config.ts Documentation

````typescript
/**
 * TSera Configuration
 *
 * Complete configuration for TSera project.
 * Generated with full profile and comments.
 *
 * @example
 * ```typescript
 * export default {
 *   openapi: true,
 *   docs: true,
 *   tests: true,
 *   telemetry: false,
 *   outDir: ".tsera",
 *   paths: { entities: ["core/entities"] },
 *   db: {
 *     dialect: "postgres",
 *     urlEnv: "DATABASE_URL",
 *     ssl: "prefer"
 *   },
 *   deploy: {
 *     target: "deno_deploy",
 *     entry: "app/back/main.ts"
 *   }
 * };
 * ```
 */
export default {
  openapi: true,
  docs: true,
  tests: true,
  telemetry: false,
  outDir: ".tsera",
  paths: { entities: ["core/entities"] },
  db: {
    dialect: "postgres",
    urlEnv: "DATABASE_URL",
    ssl: "prefer",
  },
  deploy: {
    target: "deno_deploy",
    entry: "app/back/main.ts",
  },
};
````
`````

## Development Documentation

### Contributing Guidelines

````markdown
## Contributing to TSera

### Development Setup

1. Clone repository
2. Install dependencies: `deno cache --lock=deno.lock --lock-write`
3. Run tests: `deno task test`
4. Start development: `deno task dev`

### Code Style

- Follow TypeScript strict mode
- Use 2-space indentation
- Maximum line length: 100 characters
- Include JSDoc comments for all public APIs

### Submitting Changes

1. Create feature branch from main
2. Make changes with clear commit messages
3. Run tests: `deno task test && deno task e2e`
4. Submit pull request with description of changes

### Testing

- Unit tests for all new functions
- Integration tests for new features
- E2E tests for complete workflows
- Golden file tests for generated content \`\`\`

## Release Documentation

### Release Notes Template

```markdown
# Release X.Y.Z

## Features

- Feature description 1
- Feature description 2
- Feature description 3

## Bug Fixes

- Bug fix description 1
- Bug fix description 2

## Breaking Changes

- Breaking change description 1
- Migration guide for breaking changes

## Installation

\`\`\`bash

# Install via deno install

deno install --global --config deno.jsonc -A -f --name tsera src/cli/main.ts

# Install binary

curl -L https://github.com/yourusername/tsera/releases/download/vX.Y.Z/tsera-linux-x64 -o tsera
chmod +x tsera ./tsera --version \`\`\`

## Documentation Standards

### Writing Style

- **Clear Headings**: Use descriptive headings for document structure
- **Concise Language**: Use simple, direct language
- **Active Voice**: Use active voice for instructions
- **Consistent Terminology**: Use consistent terms throughout documentation

### Code Documentation

- **JSDoc Comments**: Document all public APIs with JSDoc
- **Type Documentation**: Include type information in documentation
- **Example Code**: Provide working, tested examples
- **Error Documentation**: Document error conditions and handling

### Markdown Standards

- **Code Blocks**: Use fenced code blocks with language specification
- **Link Format**: Use descriptive link text
- **Table Format**: Use consistent table formatting
- **List Format**: Use consistent list formatting

## Best Practices

### Documentation Maintenance

1. **Accuracy**: Keep documentation synchronized with code
2. **Completeness**: Document all public APIs and features
3. **Clarity**: Ensure documentation is easy to understand
4. **Accessibility**: Make documentation accessible to all users
5. **Versioning**: Keep documentation versioned with release notes

### Review Process

- **Technical Review**: Review documentation for technical accuracy
- **User Review**: Review documentation for clarity and completeness
- **Editorial Review**: Review for style and consistency
- **Testing**: Test all documentation examples

### Documentation Tools

- **Static Analysis**: Use tools to check documentation quality
- **Link Checking**: Verify all internal and external links
- **Spell Checking**: Use spell checking for documentation
- **Accessibility Testing**: Test documentation for accessibility compliance
```
````
